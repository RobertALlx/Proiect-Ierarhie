import { test, expect} from '@playwright/test';
test.setTimeout(120_000); 
test('Test Case Login&Signup:Testing Login and Signup', async () => {
  const browser = await chromium.launch({ headless: false, slowMo: 1000 });
  const context = await browser.newContext();
  const page = await context.newPage();
  await page.goto('https://automationexercise.com/login');
  await page.getByRole('button', { name: 'Consent' }).click();
  await page.locator('form').filter({ hasText: 'Login' }).getByPlaceholder('Email Address').click();
  await page.locator('form').filter({ hasText: 'Login' }).getByPlaceholder('Email Address').fill('robittest@gmail.com');
  await page.getByRole('textbox', { name: 'Password' }).click();
  await page.getByRole('textbox', { name: 'Password' }).fill('robi1234');
  await page.getByRole('button', { name: 'Login' }).click();
  await page.getByText('Your email or password is').click();
  await expect(page.locator('#form')).toContainText('Your email or password is incorrect!');
  await page.getByRole('textbox', { name: 'Name' }).click();
  await page.getByRole('textbox', { name: 'Name' }).fill('robi');
  await page.locator('form').filter({ hasText: 'Signup' }).getByPlaceholder('Email Address').click();
  await page.locator('form').filter({ hasText: 'Signup' }).getByPlaceholder('Email Address').fill('robi12@gmail.com');
  await page.getByRole('button', { name: 'Signup' }).click();
  await page.getByText('Mr.').click();
  await page.getByRole('textbox', { name: 'Password *' }).click();
  await page.getByRole('textbox', { name: 'Password *' }).fill('robi123');
  await page.getByText('Sign up for our newsletter!').click();
  await page.getByText('Receive special offers from').click();
  await page.locator('#days').selectOption('1');
  await page.locator('body').selectOption('1');
  await page.locator('#days').click();
  await page.locator('div').filter({ hasText: 'Enter Account Information' }).nth(1).click();
  await page.locator('#months').selectOption('1');
  await page.locator('body').selectOption('1');
  await page.locator('#months').click();
  await page.locator('#form form div').filter({ hasText: 'Year 2021 2020 2019 2018 2017' }).nth(2).click();
  await page.locator('#years').selectOption('2021');
  await page.locator('body').selectOption('2021');
  await page.getByRole('textbox', { name: 'First name *' }).click();
  await page.getByRole('textbox', { name: 'First name *' }).fill('robeert');
  await page.getByRole('textbox', { name: 'Last name *' }).click();
  await page.getByRole('textbox', { name: 'Last name *' }).fill('aex');
  await page.getByRole('textbox', { name: 'Company', exact: true }).click();
  await page.getByRole('textbox', { name: 'Company', exact: true }).fill('123441');
  await page.getByRole('textbox', { name: 'Address * (Street address, P.' }).click();
  await page.getByRole('textbox', { name: 'Address * (Street address, P.' }).click();
  await page.getByRole('textbox', { name: 'Address * (Street address, P.' }).fill('1');
  await page.getByRole('textbox', { name: 'Address 2' }).click();
  await page.getByRole('textbox', { name: 'Address 2' }).fill('2');
  await page.getByRole('textbox', { name: 'State *' }).click();
  await page.getByRole('textbox', { name: 'State *' }).fill('asd');
  await page.getByRole('textbox', { name: 'City * Zipcode *' }).click();
  await page.getByRole('textbox', { name: 'City * Zipcode *' }).fill('ret');
  await page.locator('#zipcode').click();
  await page.locator('#zipcode').fill('12345');
  await page.getByRole('textbox', { name: 'Mobile Number *' }).click();
  await page.getByRole('textbox', { name: 'Mobile Number *' }).fill('567');
  await page.getByRole('button', { name: 'Create Account' }).click();
  await expect(page.locator('b')).toContainText('Account Created!');
  await page.getByRole('link', { name: 'Continue' }).click();
  await page.getByRole('link', { name: 'ï€£ Logout' }).click();
  await page.getByRole('heading', { name: 'Login to your account' }).click();
  await page.locator('form').filter({ hasText: 'Login' }).getByPlaceholder('Email Address').click();
  await page.locator('form').filter({ hasText: 'Login' }).getByPlaceholder('Email Address').fill('robi12@gmail.com');
  await page.getByRole('textbox', { name: 'Password' }).click();
  await page.getByRole('textbox', { name: 'Password' }).fill('robi123');
  await page.getByRole('button', { name: 'Login' }).click();
  await expect(page.locator('#header')).toContainText('Logged in as robi');
});